// ============================================================
// 01_what_is_struct.rs - ä»€ä¹ˆæ˜¯ç»“æ„ä½“ï¼Ÿ
// ============================================================
//
// ğŸ¯ å­¦ä¹ ç›®æ ‡ï¼šç†è§£ç»“æ„ä½“æ˜¯ä»€ä¹ˆ
//
// ç»“æ„ä½“ = æŠŠå¤šä¸ªç›¸å…³çš„æ•°æ®æ‰“åŒ…åœ¨ä¸€èµ·
// ç±»ä¼¼äºï¼š
//   - Python çš„ classï¼ˆä½†æ›´ç®€å•ï¼‰
//   - JavaScript çš„å¯¹è±¡ {}
//   - Java çš„ classï¼ˆä½†æ²¡æœ‰ç»§æ‰¿ï¼‰
//
// ============================================================

/// è¿è¡Œè¿™ä¸ªæ¨¡å—çš„ç¤ºä¾‹
pub fn run() {
    println!("=== ä»€ä¹ˆæ˜¯ç»“æ„ä½“ï¼ˆStructï¼‰===\n");

    // --------------------------------------------------------
    // ğŸ“Œ é—®é¢˜å¼•å…¥ï¼šæ²¡æœ‰ç»“æ„ä½“æ—¶çš„å›°å¢ƒ
    // --------------------------------------------------------
    println!("ã€1ã€‘æ²¡æœ‰ç»“æ„ä½“æ—¶ï¼Œæ•°æ®å¾ˆæ•£ä¹±");
    println!();

    // æè¿°ä¸€ä¸ªäººï¼Œéœ€è¦å¾ˆå¤šç‹¬ç«‹çš„å˜é‡
    let name = "JohnYe";
    let age = 25;
    let email = "john@example.com";

    println!("  å§“å: {}", name);
    println!("  å¹´é¾„: {}", age);
    println!("  é‚®ç®±: {}", email);
    println!();
    println!("  ğŸ˜µ é—®é¢˜ï¼šè¿™ä¸‰ä¸ªå˜é‡æ˜¯åˆ†å¼€çš„ï¼Œæ²¡æœ‰æ˜ç¡®çš„å…³è”ï¼");
    println!("  å¦‚æœè¦ä¼ ç»™å‡½æ•°ï¼Œå¾—ä¼ ä¸‰ä¸ªå‚æ•°...");
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ è§£å†³æ–¹æ¡ˆï¼šç”¨ç»“æ„ä½“æ‰“åŒ…
    // --------------------------------------------------------
    println!("ã€2ã€‘ç”¨ç»“æ„ä½“æŠŠç›¸å…³æ•°æ®æ‰“åŒ…åœ¨ä¸€èµ·");
    println!();

    // å®šä¹‰ç»“æ„ä½“ï¼ˆç›¸å½“äºåˆ›å»ºä¸€ä¸ª"æ¨¡æ¿"ï¼‰
    // struct User {
    //     name: String,
    //     age: u32,
    //     email: String,
    // }

    // åˆ›å»ºç»“æ„ä½“å®ä¾‹
    let user1 = User {
        name: String::from("JohnYe"),
        age: 25,
        email: String::from("john@example.com"),
    };

    println!("  åˆ›å»ºäº†ä¸€ä¸ª User ç»“æ„ä½“å®ä¾‹ï¼š");
    println!("  user1.name  = \"{}\"", user1.name);
    println!("  user1.age   = {}", user1.age);
    println!("  user1.email = \"{}\"", user1.email);
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ ç»“æ„ä½“çš„å®šä¹‰è¯­æ³•
    // --------------------------------------------------------
    println!("ã€3ã€‘ç»“æ„ä½“å®šä¹‰è¯­æ³•");
    println!();
    println!("  struct ç»“æ„ä½“å {{");
    println!("      å­—æ®µ1: ç±»å‹1,");
    println!("      å­—æ®µ2: ç±»å‹2,");
    println!("  }}");
    println!();
    println!("  ä¾‹å¦‚ï¼š");
    println!("  struct User {{");
    println!("      name: String,    // å­—æ®µï¼šç±»å‹");
    println!("      age: u32,");
    println!("      email: String,");
    println!("  }}");
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ è®¿é—®å’Œä¿®æ”¹å­—æ®µ
    // --------------------------------------------------------
    println!("ã€4ã€‘è®¿é—®å’Œä¿®æ”¹å­—æ®µ");
    println!();

    // ç”¨ç‚¹å·è®¿é—®å­—æ®µ
    println!("  è®¿é—®å­—æ®µï¼šç”¨ç‚¹å· (.)");
    println!("  user1.name = \"{}\"", user1.name);
    println!();

    // ä¿®æ”¹å­—æ®µï¼ˆéœ€è¦ mutï¼‰
    let mut user2 = User {
        name: String::from("Alice"),
        age: 30,
        email: String::from("alice@example.com"),
    };

    println!("  ä¿®æ”¹å‰: user2.age = {}", user2.age);
    user2.age = 31;  // ä¿®æ”¹å­—æ®µ
    println!("  ä¿®æ”¹å: user2.age = {}", user2.age);
    println!();
    println!("  ğŸ’¡ æ³¨æ„ï¼šè¦ä¿®æ”¹å­—æ®µï¼Œæ•´ä¸ªå˜é‡å¿…é¡»æ˜¯ mut çš„");
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ ç®€åŒ–åˆ›å»ºè¯­æ³•
    // --------------------------------------------------------
    println!("ã€5ã€‘ç®€åŒ–åˆ›å»ºè¯­æ³•");
    println!();

    let name = String::from("Bob");
    let age = 28;

    // å½“å˜é‡åå’Œå­—æ®µåç›¸åŒæ—¶ï¼Œå¯ä»¥ç®€å†™
    let user3 = User {
        name,  // ç­‰ä»·äº name: name
        age,   // ç­‰ä»·äº age: age
        email: String::from("bob@example.com"),
    };

    println!("  å½“å˜é‡å = å­—æ®µåæ—¶ï¼Œå¯ä»¥ç®€å†™ï¼š");
    println!("  let name = String::from(\"Bob\");");
    println!("  User {{ name, age, ... }}  // ä¸ç”¨å†™ name: name");
    println!("  user3.name = \"{}\"", user3.name);
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ ç»“æ„ä½“æ›´æ–°è¯­æ³•
    // --------------------------------------------------------
    println!("ã€6ã€‘ä»å·²æœ‰å®ä¾‹åˆ›å»ºæ–°å®ä¾‹");
    println!();

    let user4 = User {
        email: String::from("new@example.com"),  // åªæ”¹ email
        ..user2  // å…¶ä»–å­—æ®µä» user2 å¤åˆ¶ï¼ˆæ³¨æ„ï¼šè¿™ä¼š Move user2 çš„ String å­—æ®µï¼ï¼‰
    };

    println!("  ä½¿ç”¨ .. è¯­æ³•ä»å·²æœ‰å®ä¾‹å¤åˆ¶ï¼š");
    println!("  User {{ email: \"...\", ..user2 }}");
    println!("  user4.name = \"{}\"", user4.name);
    println!("  user4.age = {}", user4.age);
    println!("  user4.email = \"{}\"", user4.email);
    println!();

    // --------------------------------------------------------
    // ğŸ“Œ ç»“æ„ä½“ vs å…¶ä»–è¯­è¨€
    // --------------------------------------------------------
    println!("ã€7ã€‘ç»“æ„ä½“ vs å…¶ä»–è¯­è¨€å¯¹æ¯”");
    println!();
    println!("  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
    println!("  â”‚   è¯­è¨€     â”‚   ç±»ä¼¼æ¦‚å¿µ                      â”‚");
    println!("  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
    println!("  â”‚ Rust       â”‚ structï¼ˆåªæœ‰æ•°æ®ï¼Œæ–¹æ³•åœ¨ implï¼‰ â”‚");
    println!("  â”‚ Python     â”‚ classï¼ˆæ•°æ®+æ–¹æ³•åœ¨ä¸€èµ·ï¼‰        â”‚");
    println!("  â”‚ JavaScript â”‚ å¯¹è±¡ {{}}ï¼ˆåŠ¨æ€ç±»å‹ï¼‰             â”‚");
    println!("  â”‚ Java       â”‚ classï¼ˆæ•°æ®+æ–¹æ³•åœ¨ä¸€èµ·ï¼‰        â”‚");
    println!("  â”‚ C          â”‚ structï¼ˆåªæœ‰æ•°æ®ï¼Œæ²¡æœ‰æ–¹æ³•ï¼‰    â”‚");
    println!("  â”‚ Go         â”‚ structï¼ˆå’Œ Rust ç±»ä¼¼ï¼‰          â”‚");
    println!("  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
    println!();

    println!("=== ç¤ºä¾‹ç»“æŸ ===");
    println!("\nğŸ“š ä¸‹ä¸€æ­¥ï¼šå­¦ä¹  impl å—ï¼Œç»™ç»“æ„ä½“æ·»åŠ æ–¹æ³•");
}

// ============================================================
// ç»“æ„ä½“å®šä¹‰
// ============================================================

/// ç”¨æˆ·ç»“æ„ä½“ - å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
struct User {
    name: String,   // ç”¨æˆ·å
    age: u32,       // å¹´é¾„
    email: String,  // é‚®ç®±
}
